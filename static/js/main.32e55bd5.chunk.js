(this.webpackJsonplevi=this.webpackJsonplevi||[]).push([[0],{220:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var c,r,a=n(1),s=n(84),i=n.n(s),l=n(85),o=n(3),u=n.n(o),d=n(7),j=n(2),b=n(19),h=n.n(b),m="https://home-bayes.glitch.me/api/dw",p=99,g=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(m,"/chars")).catch((function(e){e.response?(console.log("Request made and server responded"),console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?(console.log("The request was made but no response was received"),console.log(e.request)):(console.log("Something happened in setting up the request that triggered an Error"),console.log("Error",e.message))}));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("saveCharacterData: ",{id:p,charInfo:[t]}),e.next=3,h.a.post("".concat(m,"/chars/").concat(t.name),{id:p,charInfo:[t]},{headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,console.log("res.characters",JSON.parse(n.characters)),e.abrupt("return",n.characters);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("".concat(m,"/groups/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("submitting: ","".concat(m,"/newUser/").concat(t)),e.next=3,h.a.post("".concat(m,"/newUser/").concat(t),"",{headers:{"Content-Type":"text/plain"}});case 3:return n=e.sent,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=n(18),y=n(0),N=function(e,t){switch(t.type){case"UPDATE":console.log(t.i,t.field,t.newValue);var n=Object(v.a)(e);return n[t.i][t.field]=t.newValue,console.log(n),n;default:return e}},w=function(e){var t=Object(a.useReducer)(N,e.list),n=Object(j.a)(t,2),c=n[0],r=n[1];console.log(e.listName),console.log(c);var s=function(t,n,a){r({type:"UPDATE",i:t,field:n,newValue:a}),e.handleSave(e.listName,c)};return Object(a.useEffect)((function(){}),[c]),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:String(e.listName).toUpperCase()}),Object(y.jsx)("div",{className:"fwmp",children:c.length>0&&c.map((function(e,t){return Object(y.jsxs)("div",{className:"group-item c",children:[Object(y.jsx)("b",{children:e.name}),Object(y.jsxs)("div",{className:"c",style:{display:"flex"},children:[Object(y.jsx)("div",{className:"group-item",onClick:function(n){return s(t,"score",e.score-1)},children:"-"}),Object(y.jsx)("div",{children:e.score}),Object(y.jsx)("div",{className:"group-item",onClick:function(n){return s(t,"score",e.score+1)},children:"+"})]})]},e.name)}))})]})},k=n(29),S=n(39),C=n(40),V=n(41),U=V.a.div(c||(c=Object(C.a)(["\n  cursor: pointer;\n  padding: 0.3rem;\n  margin-right: 0.1rem;\n  border: 1px solid gray;\n  border-radius: 5px;\n  width: 1.25rem;\n  height: 1.25rem;\n  text-align: center;\n  text-justify: center;\n  justify-content: center;\n  align-content: center;\n  background-color: ",";\n\n  :hover {\n    border-bottom: 1px solid black;\n    border-right: 1px solid black;\n  }\n"])),(function(e){return e.toggle?"rgb(220, 230, 220)":"rgb(230, 220, 220)"})),E=(Object(V.a)(U)(r||(r=Object(C.a)(["\n  width: auto;\n"]))),n(14)),A=n.n(E),L=function(e){return e?e<4?"-3":e<6?"-2":e<9?"-1":e<13?"0":e<16?"+1":e<18?"+2":"+3":""},R=function(e){return Object(y.jsx)("div",{children:Object(y.jsx)(U,{toggle:e.hasItem,onClick:function(t){return e.handleUpdateScore({group:e.groupName,newValue:e.score+1,message:"UPDATE",target:e.labelValue})},children:Object(y.jsx)("span",{children:"+"})})})},D=function(e){return Object(a.useEffect)((function(){console.log("props.score",e.score)}),[e.score]),e.score?Object(y.jsxs)("div",{style:{display:"flex",cursor:"pointer",fontSize:"0.9rem",color:"rgb(10, 10, 10)",margin:"0 0.2rem"},children:[Object(y.jsx)("div",{style:{margin:"0 0.2rem"},children:Object(y.jsx)("b",{children:e.score})}),Object(y.jsx)(R,{groupName:e.groupName,labelValue:e.labelValue,score:e.score,handleUpdateScore:e.handleUpdateScore}),Object(y.jsx)("div",{style:{width:"2rem"},children:L(e.score)&&"(".concat(L(e.score),")")})]}):""},M=function(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),i=Object(j.a)(s,2),l=i[0],o=i[1];e.groupName;var u=function(){document.getElementById("group-list-item-container-".concat(e.labelValue))&&(c?document.getElementById("group-list-item-container-".concat(e.labelValue)).style={width:"46%",maxHeight:"3rem"}:document.getElementById("group-list-item-container-".concat(e.labelValue)).stylestyle={width:"100%",maxHeight:"auto"}),e.oneLine||r(!c),function(){o((arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||!l)}()},d=null;d="Custom"===e.source?null:("Core"===e.source&&(d="https://www.dungeonworldsrd.com/"),e.playbooks&&e.playbooks[0]?d+="classes/".concat(e.playbooks[0],"/#").concat(String(e.labelValue).replaceAll(" ","_")):"Weapon"===e.type?d+="Equipment/#Weapon_List":d+="Equipment/#".concat(String(e.type).replaceAll(" ","_")),d);var b=function(e){return"abilities"===e.groupName?Object(y.jsx)("div",{}):Object(y.jsx)("div",{children:e.editMode?Object(y.jsx)(U,{toggle:e.hasItem,onClick:function(t){return e.handleUpdateGroupList({group:e.groupName,newValue:e.labelValue,message:e.hasItem?"REMOVE":"ADD"})},children:Object(y.jsx)("span",{role:"image",children:e.hasItem?"\u2714\ufe0f":"\u274c"})}):Object(y.jsx)("div",{})})},h=function(){return e.oneLine?Object(y.jsx)("div",{className:"clickable",onClick:u,style:{alignContent:"flex-end",justifyContent:"flex-end",fontSize:"0.8rem",color:"rgb(10, 10, 10)",padding:"0 0.2rem"},children:e.subtitle&&Object(y.jsx)(A.a,{children:String(e.subtitle)})}):Object(y.jsxs)("div",{className:"clickable",onClick:u,style:{display:"flex",fontSize:"0.8rem",color:"rgb(10, 10, 10)",padding:"0 0.2rem"},children:[Object(y.jsxs)("div",{style:{display:"flex",flexGrow:1},children:[e.playbooks[0]&&Object(y.jsx)("div",{style:{marginRight:"0.2rem"},children:Object(y.jsx)(A.a,{children:String(e.playbooks)})}),e.subtitle&&Object(y.jsx)("div",{style:{marginRight:"0.2rem"},children:Object(y.jsx)(A.a,{children:String(e.subtitle)})}),e.tags[0]&&Object(y.jsx)("div",{style:{marginRight:"0.2rem"},children:Object(y.jsx)(A.a,{children:String("*"+e.tags+"*")})})]}),Object(y.jsxs)("div",{style:{display:"flex",alignContent:"flex-end",justifyContent:"flex-end"},children:[e.weight&&Object(y.jsx)(A.a,{children:String(e.weight+"\ud83c\udf92, ")}),e.price&&Object(y.jsx)(A.a,{children:String(e.price+"\ud83d\udcb0")})]})]})};return Object(y.jsxs)("div",{className:c?"selected":"unselected",children:[Object(y.jsxs)("div",{style:{display:"flex"},children:[Object(y.jsx)(b,{}),Object(y.jsxs)("div",{className:"group-item-labelValue clickable",onClick:u,children:[Object(y.jsx)("div",{style:{display:"flex"},children:Object(y.jsx)("div",{children:Object(y.jsx)("b",{children:e.labelValue})})}),Object(y.jsx)(h,{})]}),Object(y.jsx)(D,{groupName:e.groupName,labbelValue:e.labelValue,handleUpdateScore:e.handleUpdateScore,onClick:u,style:{},score:e.score}),e.rollWith&&Object(y.jsx)(U,{onClick:function(){return alert("Dice rolling not yet available.")},children:"\ud83c\udfb2"}),c&&d&&"abilities"!==e.groupName&&Object(y.jsx)(U,{toggle:!0,children:Object(y.jsx)("a",{href:d,rel:"noopener noreferrer",target:"_blank",style:{textDecoration:"none"},children:Object(y.jsx)("span",{role:"image",children:"\ud83d\udd17"})})})]}),c&&e.description&&Object(y.jsx)("div",{className:"clickable",onClick:u,style:{marginLeft:"0.1rem",fontSize:"0.9rem"},children:Object(y.jsx)(A.a,{children:String(e.description)})})]})},I=function(e,t){var n=[];return e.map((function(e){return t.map((function(t){t.name===e&&(n=[].concat(Object(v.a)(n),[t]))}))})),n},B=function(e){var t=Object(a.useState)(!0),n=Object(j.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)([]),i=Object(j.a)(s,2),l=i[0],o=i[1],b=Object(a.useState)(e.char[e.groupName]),h=Object(j.a)(b,2),m=h[0],p=h[1],g=Object(a.useState)(null),x=Object(j.a)(g,2),N=x[0],w=x[1],C=Object(a.useState)(null),V=Object(j.a)(C,2),E=V[0],A=V[1],L=Object(a.useState)(!1),R=Object(j.a)(L,2),D=R[0],B=R[1],T=Object(a.useState)(!1),W=Object(j.a)(T,2),q=W[0],P=(W[1],function(e){B(!D)}),_=function(e,t){var n=l;"ADD"!==t||l.includes(e)||(n=[].concat(Object(v.a)(n),[e])),"REMOVE"===t&&l.includes(e)&&(n=n.filter((function(t){return t!==e}))),o(n)},z=function(e){var t;switch(e.message){case"UPDATE":t=N;for(var n=0,c=Object.entries(t);n<c.length;n++){var r=Object(j.a)(c[n],2),a=r[0];r[1].name===e.target&&(t[a].score=e.newValue)}w(t);break;default:return void console.error("action message not recognized: ",e.message)}},X=function(e){var t;switch(e.message){case"REMOVE":m.includes(e.newValue)&&(t=m.filter((function(t){return t!==e.newValue})));break;case"ADD":m.includes(e.newValue)||(t=[].concat(Object(v.a)(m),[e.newValue]));break;default:return void console.error("action message not recognized: ",e.message)}p(t)};return Object(a.useEffect)((function(){c&&!N&&function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e.groupName);case 2:n=t.sent,"abilities"===e.groupName&&(n.data=e.char.abilities),w(n.data),r(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()();c||function(){switch(e.groupName){case"gear":var t=10+function(e,t,n){var c;return e.map((function(e){e.name===t&&(c=e[n])})),c}(e.char.abilities,"Strength","score"),n=I(m,N).map((function(e){return e.weight||0})).reduce((function(e,t){return e+t}),0);A("".concat(n,"/").concat(t,"\ud83c\udf92")),n>t&&_("OVER_MAX","ADD");break;case"spells":var c=1+e.char.level,r=I(m,N).map((function(e){return e.level||0})).reduce((function(e,t){return e+t}),0);A("".concat(r,"/").concat(c,"\u2728")),_("OVER_MAX",r>c?"ADD":"REMOVE");break;case"moves":A(I(m,N).length)}}()}),[D,e.char.level,c,m,l]),Object(y.jsxs)("div",{style:{},children:[Object(y.jsxs)("div",{style:{display:"flex",marginRight:"0.2rem"},children:[Object(y.jsx)("div",{className:"group-item-label",style:{textAlign:"center"},children:Object(y.jsx)("b",{style:{borderBottom:"1px solid gray",padding:"0 2rem"},children:String(e.groupName).toUpperCase()})}),Object(y.jsx)("div",{style:{padding:"0.4rem 0.2rem",color:"".concat(l.includes("OVER_MAX")?"red":"black")},children:E&&E}),Object(y.jsx)(U,{toggle:!D,onClick:function(){return P()},children:Object(y.jsx)("span",{role:"image",children:D?"\u274c":"\u2699\ufe0f"})}),D&&Object(y.jsx)(U,{toggle:0===l.length,onClick:function(t){return function(){if(l[0])p(e.char[e.groupName]);else{var t=Object(S.a)(Object(S.a)({},e.char),{},Object(k.a)({},e.groupName,m));e.setChar(t),O(t),P()}}()},children:Object(y.jsx)("span",{role:"image",children:l[0]?"\u26d4":"\ud83d\udcbe"})})]}),!c&&Object(y.jsx)("div",{className:"fwmp",children:!q&&Object.values(N).map((function(t){return(m.includes(t.name)||D||"abilities"===e.groupName)&&Object(y.jsx)("div",{id:"group-list-item-container-".concat(t.name),className:"group-list-item-container",children:Object(y.jsx)(M,{groupName:e.groupName,labelValue:t.name,subtitle:t.level||"",level:t.level,price:t.price,description:t.description,source:t.source||"",webURL:t.webURL||"",playbooks:t.playbooks||"",rollWith:t.rollWith||"",editMode:D,handleUpdateGroupList:X,handleUpdateScore:z,hasItem:m.includes(t.name),type:t.type||"",tags:t.tags||"",weight:t.weight||"",score:t.score||""})},"group-list-item-container-".concat(t.name))}))}),Object(y.jsx)("br",{})]})},T=function(e,t,n){var c;return e.map((function(e){e.name===t&&(c=e[n])})),c},W=function(e){var t,n=Object(a.useState)("compact"),c=Object(j.a)(n,2),r=c[0];c[1];return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsxs)("div",{className:r,children:[Object(y.jsx)("div",{className:"single-item-container",children:Object(y.jsx)(M,{field:"name",subtitle:"Name",labelValue:e.char.name,oneLine:!0})}),Object(y.jsx)("div",{className:"single-item-container",children:Object(y.jsx)(M,{field:"race",subtitle:"Race",labelValue:e.char.race,oneLine:!0})}),Object(y.jsx)("div",{className:"single-item-container",children:Object(y.jsx)(M,{field:"playbook",subtitle:"Playbook",labelValue:e.char.playbook,source:"".concat(e.char.playbook),webURL:e.char.webURL,oneLine:!0})}),Object(y.jsx)("div",{className:"single-item-container",children:Object(y.jsx)(M,{field:"alignment",subtitle:"Alignment",labelValue:e.char.alignment.name,oneLine:!0})}),Object(y.jsx)("div",{className:"single-item-container",children:Object(y.jsx)(M,{field:"level",subtitle:"Level",labelValue:e.char.level,oneLine:!0})}),Object(y.jsx)("div",{className:"single-item-container",children:Object(y.jsx)(M,{field:"xp",subtitle:"XP",labelValue:"".concat(e.char.xp," / ").concat((t=e.char.level+1,7*t+t)),oneLine:!0})}),Object(y.jsx)("div",{className:"single-item-container",children:Object(y.jsx)(M,{field:"hp",subtitle:"HP",labelValue:e.char.basehp+T(e.char.abilities,"Constitution","score"),oneLine:!0})})]}),Object(y.jsx)("br",{}),Object(y.jsx)(w,{list:e.char.abilities,handleSave:e.handleSave,listName:"abilities"}),Object(y.jsxs)("div",{style:{padding:0,margin:0},children:[Object(y.jsx)("div",{className:"group-item-labelValue",style:{textAlign:"center"},children:Object(y.jsx)("b",{style:{borderBottom:"1px solid gray",padding:"0 2rem"},children:"BONDS"})}),Object(y.jsx)("div",{className:"fwmp",children:e.char.bonds.map((function(e){return Object(y.jsx)("div",{className:"single-item-container",children:Object(y.jsx)(M,{subtitle:e.description,field:"bonds",oneLine:!0})},e.description)}))})]}),Object(y.jsx)("br",{}),Object(y.jsx)(B,{groupName:"moves",char:e.char,setChar:e.setChar}),Object(y.jsx)(B,{groupName:"spells",char:e.char,setChar:e.setChar}),Object(y.jsx)(B,{groupName:"gear",char:e.char,setChar:e.setChar})]})},q=function(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),i=Object(j.a)(s,2),l=(i[0],i[1]),o=Object(a.useState)(""),b=Object(j.a)(o,2),h=b[0],m=b[1],p=function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),t.next=3,x(h);case 3:(n=t.sent)&&(e.setAllUsers(n),e.handleUserChange(h));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{style:{padding:"1rem",borderBottom:"1px solid gray"},children:"Accounts"}),Object(y.jsxs)("div",{className:"fwmp",children:[e.allUsers&&e.allUsers.map((function(t){return Object(y.jsxs)("div",{onClick:function(n){return e.handleUserChange(t.userName)},className:"single-item-container",children:[Object(y.jsx)("b",{children:t.userName}),Object(y.jsx)("div",{children:t.characters.map((function(e,t){return Object(y.jsx)("div",{className:"indented",children:e.name},Math.random())}))})]},Math.random())})),Object(y.jsx)("div",{onClick:function(){return r(!c)},className:"single-item-container ".concat(c?"selected":"unselected"),children:"New User"})]}),c&&Object(y.jsx)("div",{style:{display:"flex",minWidth:"100vw",alignContent:"center",justifyContent:"center"},children:Object(y.jsxs)("div",{className:"single-item-container",children:[Object(y.jsx)("input",{onChange:function(e){var t;t=e.target.value,m(t)},style:{margin:"1rem 0",minWidth:"99%",textAlign:"center"},placeholder:"User Name"}),Object(y.jsx)("div",{onClick:function(e){return p()},className:"clickable ".concat(c?"selected":"unselected"),style:{padding:"1rem 0",minWidth:"100%",textAlign:"center"},children:"CREATE"})]})})]})};n(220);function P(){var e=Object(a.useState)(!0),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),s=Object(j.a)(r,2),i=s[0],o=s[1],b=Object(a.useState)(null),h=Object(j.a)(b,2),m=h[0],f=h[1],x=Object(a.useState)("Levi"),v=Object(j.a)(x,2),N=v[0],w=(v[1],Object(a.useState)(null)),k=Object(j.a)(w,2),S=k[0],C=k[1],V=Object(a.useState)(null),U=Object(j.a)(V,2);U[0],U[1];Object(a.useEffect)((function(){n&&!i&&function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,console.log("setAllUsers: ",t),o(t),c(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[N,i]);var E=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=S)[t]=n,e.next=4,O(c);case 4:r=e.sent,console.log(r),C(r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{children:[!1,m&&Object(y.jsxs)("div",{children:["User: ",m.userName]}),i&&!S&&Object(y.jsx)(q,{allUsers:i,setAllUsers:o,handleUserChange:function(e){console.log("Searching for user: ",e),console.log("allUsers: ",i);var t,n,c=Object(l.a)(i);try{for(c.s();!(t=c.n()).done;){var r=t.value;console.log("user: ",r),r.userName===e&&(f(r),console.log("setChar: ",r.characters[0]),n=r.id,p=n,C(r.characters[0]))}}catch(a){c.e(a)}finally{c.f()}}}),S&&Object(y.jsx)(W,{char:S,setChar:C,handleSave:E}),n&&Object(y.jsx)("div",{children:"loading..."})]})}var _=document.getElementById("root");i.a.render(Object(y.jsx)(a.StrictMode,{children:Object(y.jsx)(P,{})}),_)}},[[221,1,2]]]);
//# sourceMappingURL=main.32e55bd5.chunk.js.map